# üîç –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –†–ê–ó–ë–û–†: –ü–æ—á–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## ‚ùó –ü–ï–†–í–û–ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤ –≤–∞—à–µ–π —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ù–ï –†–ê–ë–û–¢–ê–ï–¢, –ø–æ—Ç–æ–º—É —á—Ç–æ:**

### Cloud Run ‚Äî —ç—Ç–æ serverless –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

Cloud Run **–ù–ï –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–¢** —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ cron-–∑–∞–¥–∞—á–∏ –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ HTTP-–∑–∞–ø—Ä–æ—Å–∞—Ö**
   - Cloud Run –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç HTTP-–∑–∞–ø—Ä–æ—Å
   - –ï—Å–ª–∏ –Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç

2. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç**
   - –î–∞–∂–µ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, Cloud Run –º–æ–∂–µ—Ç –µ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
   - –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–∞

3. **node-cron –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ù–ï –†–ê–ë–û–¢–ê–ï–¢ –Ω–∞–¥–µ–∂–Ω–æ**
   - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω
   - –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, cron –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
   - –î–∞–∂–µ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–í –∫–æ–¥–µ –µ—Å—Ç—å `node-cron` –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤ `backend/src/server.ts`:

```typescript
cron.schedule(automationSchedule, async () => {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
});
```

**–≠—Ç–æ—Ç –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ:**
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ (–∫–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ)
- ‚úÖ –í development –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- ‚ùå **–ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Cloud Run production**

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: Cloud Scheduler

### –ß—Ç–æ —Ç–∞–∫–æ–µ Cloud Scheduler?

**Google Cloud Scheduler** ‚Äî —ç—Ç–æ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è Cloud Run –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- –ù–∞–¥–µ–∂–µ–Ω –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º
- –ü–µ—Ä–≤—ã–µ 3 job'–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. **Cloud Scheduler** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP POST –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–∞—à Cloud Run —Å–µ—Ä–≤–∏—Å
2. –ó–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –Ω–∞ endpoint: `/api/automation/run-scheduled`
3. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∫–∞–Ω–∞–ª—ã –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –¥–ª—è —Ç–µ—Ö, —É –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—Å—Ç—É–ø–∏–ª–æ –≤—Ä–µ–º—è
4. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
Cloud Scheduler (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
    ‚Üì
    POST /api/automation/run-scheduled
    ‚Üì
Cloud Run Backend
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ —Å automation.enabled = true
    ‚Üì
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞:
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–Ω—è –Ω–µ–¥–µ–ª–∏
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ (Asia/Almaty)
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
    ‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (IDEAS ‚Üí PROMPT ‚Üí VIDEO)
```

---

## üìã –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û

### 1. ‚úÖ –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –í—ã—è–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: node-cron –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Cloud Run
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ä–µ—à–µ–Ω–∏–µ: Cloud Scheduler

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω endpoint `/api/automation/run-scheduled`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 3. ‚úÖ Endpoint –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- `POST /api/automation/channels/:channelId/run-now`
- –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å—Ä–∞–∑—É
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 4. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å" –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `ChannelSettings.tsx`
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é

### 5. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å –ø–æ–ª–Ω—ã–º–∏ stack traces

### 6. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `backend/CLOUD_SCHEDULER_SETUP.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

---

## üöÄ –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨ –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Æ

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Cloud Scheduler

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É (–∑–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ –≤–∞—à):

```bash
gcloud scheduler jobs create http automation-run-scheduled \
  --location=europe-central2 \
  --schedule="*/5 * * * *" \
  --uri="https://whitecoding-backend-487498983516.europe-central2.run.app/api/automation/run-scheduled" \
  --http-method=POST \
  --headers="Content-Type=application/json" \
  --time-zone="Asia/Almaty" \
  --attempt-deadline=300s \
  --description="–ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–æ–ª–∏–∫–æ–≤ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç"
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** —Å–º. `backend/CLOUD_SCHEDULER_SETUP.md`

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ job –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–µ—Å—Ç–∞:**
```bash
gcloud scheduler jobs run automation-run-scheduled --location=europe-central2
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Cloud Run:**
```bash
gcloud run services logs read whitecoding-backend --region=europe-central2 --limit=50
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
[Automation] ===== SCHEDULED AUTOMATION CHECK STARTED =====
[Automation] Found X channels with automation enabled
[Automation] ===== SCHEDULED AUTOMATION CHECK COMPLETED =====
```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å"** –≤ UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ Cloud Run —Ä–µ–≥—É–ª—è—Ä–Ω–æ
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Cloud Monitoring –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å" –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## üîß –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- Endpoint `/api/automation/run-scheduled` –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- Endpoint `/api/automation/channels/:id/run-now` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å" –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
- **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Cloud Scheduler** (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤—ã—à–µ)
- –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### ‚ùå –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏ –ø–æ—á–µ–º—É):
- –õ–æ–∫–∞–ª—å–Ω—ã–π `node-cron` –≤ Cloud Run ‚Äî –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- –§–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ Cloud Run ‚Äî –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

---

## üìä –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è?

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Cloud Run:**
```bash
gcloud run services logs read whitecoding-backend --region=europe-central2 --limit=100 | grep "Automation"
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Cloud Scheduler job:**
```bash
gcloud scheduler jobs describe automation-run-scheduled --location=europe-central2
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ UI:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–∞
   - –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å"
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–æ–∑–¥–∞–ª–∞—Å—å –ª–∏ –∑–∞–¥–∞—á–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Firestore:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é `videoJobs`
   - –ù–∞–π–¥–∏—Ç–µ –∑–∞–¥–∞—á–∏ —Å `isAuto: true`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ `createdAt`

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Cloud Scheduler –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ** ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –≤ production

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å"** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Cloud Scheduler

3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫

4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ `lastRunAt`** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–Ω–∞–ª–∞ ‚Äî —ç—Ç–æ –ø–æ–∫–∞–∂–µ—Ç, –∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞–ª–∞—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

5. **–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Cloud Scheduler job —Å–æ–∑–¥–∞–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Cloud Run –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–Ω–∞–ª—ã –∏–º–µ—é—Ç `automation.enabled = true`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Ä–µ–º—è –∏ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üéØ –ò–¢–û–ì

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤–æ–∑–º–æ–∂–Ω–∞ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Cloud Scheduler –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ production.

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤
- ‚úÖ Endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ UI –≥–æ—Ç–æ–≤
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Cloud Scheduler**

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Cloud Scheduler –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.**

---

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:** `backend/CLOUD_SCHEDULER_SETUP.md`
- **Endpoint –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:** `POST /api/automation/channels/:channelId/run-now`
- **Endpoint –¥–ª—è scheduled –∑–∞–ø—É—Å–∫–∞:** `POST /api/automation/run-scheduled`
- **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `ENABLE_LOCAL_CRON=true` –≤ `.env` (—Ç–æ–ª—å–∫–æ –¥–ª—è dev!)

